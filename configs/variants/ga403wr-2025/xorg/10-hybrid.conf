# Xorg Configuration for GA403WR (2025) - RTX 5070 Ti variant
# Optimized for 2560x1600 OLED display with 120Hz support

Section "ServerLayout"
    Identifier "layout"
    Screen 0 "amd"
    Option "AllowNVIDIAGPUScreens"
EndSection

Section "Device"
    Identifier "amd"
    Driver "amdgpu"
    BusID "PCI:5:0:0"
    Option "TearFree" "true"
    Option "DRI" "3"
    Option "VariableRefresh" "true"
    Option "EnablePageFlip" "true"
    # OLED-specific optimizations
    Option "ColorTiling" "true"
    Option "ColorTiling2D" "true"
EndSection

Section "Screen"
    Identifier "amd"
    Device "amd"
    Monitor "eDP-1"
    DefaultDepth 24
    SubSection "Display"
        Depth 24
        Modes "2560x1600_120" "2560x1600_90" "2560x1600_60"
    EndSubSection
EndSection

Section "Monitor"
    Identifier "eDP-1"
    # OLED 120Hz modeline
    Modeline "2560x1600_120" 552.75 2560 2608 2640 2720 1600 1603 1609 1646 +hsync -vsync
    Modeline "2560x1600_90" 410.50 2560 2608 2640 2720 1600 1603 1609 1635 +hsync -vsync
    Option "PreferredMode" "2560x1600_120"
    Option "DPMS" "true"
    # HDR support
    Option "max_bpc" "10"
    Option "Colorspace" "RGB"
EndSection

# NVIDIA GPU Configuration (RTX 5070 Ti)
Section "Device"
    Identifier "nvidia"
    Driver "nvidia"
    BusID "PCI:1:0:0"
    Option "AllowEmptyInitialConfiguration"
    # RTX 5070 Ti specific optimizations
    Option "Coolbits" "28"
    Option "RegistryDwords" "PowerMizerEnable=0x1; PerfLevelSrc=0x2222; PowerMizerDefault=0x3; PowerMizerDefaultAC=0x3"
EndSection

# External display support (HDMI 2.1 + USB-C DP)
Section "Monitor"
    Identifier "HDMI-A-1"
    Option "RightOf" "eDP-1"
    Option "PreferredMode" "auto"
    # HDMI 2.1 4K@120Hz support
    Option "max_bpc" "10"
EndSection

Section "Monitor"
    Identifier "DP-1"
    Option "RightOf" "eDP-1"
    Option "PreferredMode" "auto"
    # USB-C DP 4K@60Hz support
    Option "max_bpc" "10"
EndSection